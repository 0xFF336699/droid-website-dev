{"version":3,"file":"static/chunks/pages/project-editor-a5393e45b9e16a53.js","mappings":"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","sources":["webpack://_N_E/../../../../src/htmls/accessibility-info-buttons/accessibility-info-buttons.ts","webpack://_N_E/../../../src/utils/router-utils.ts","webpack://_N_E/./src/components/page/action-list/groups/a11y/node-select/mockA11yNodeInfo.ts","webpack://_N_E/./src/components/page/action-list/groups/a11y/node-select/node-execute-select.tsx","webpack://_N_E/./src/components/page/action-list/groups/a11y/a11y-group.ts","webpack://_N_E/./src/components/page/action-list/groups/app/app-select/app-select.tsx","webpack://_N_E/./src/components/page/action-list/groups/app/to-app-main-page/to-app-main-page.tsx","webpack://_N_E/./src/components/page/action-list/groups/app/app-group.ts","webpack://_N_E/./src/components/page/action-list/action.data.ts","webpack://_N_E/./src/components/page/trigger-list/groups/time/timeout/timeout.tsx","webpack://_N_E/./src/components/page/trigger-list/groups/time/time-group.ts","webpack://_N_E/./src/components/page/trigger-list/groups/app/activity/activity-in.tsx","webpack://_N_E/./src/components/page/trigger-list/groups/app/app-group.ts","webpack://_N_E/./src/components/page/trigger-list/trigger.data.ts","webpack://_N_E/?650e","webpack://_N_E/../../../src/android/jsbridge.ts","webpack://_N_E/../../../../src/mui/dialog/EditableText.tsx","webpack://_N_E/../../libs/droid/project/src/history/projectsHistoryMap.ts","webpack://_N_E/../../libs/droid/project/src/project/manager/edit-project-info-utils.ts","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/contexts.tsx","webpack://_N_E/../../../src/watcher/useWatchListOperation.tsx","webpack://_N_E/../../../src/watcher/updateVersion.ts","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/components/group/GroupCheck.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/components/list-page-link/ActionListOrTriggerListPageLink.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/action-group/action-list/action/Action.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/action-group/action-list/ActionList.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/action-group/ActionGroup.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/trigger-group/trigger-list/trigger/Trigger.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/trigger-group/trigger-list/TriggerList.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/trigger-group/TriggerGroup.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/trigger-action/TriggerAction.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/trigger-action-group/TriggerActionGroup.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/edit-project/EditProject.tsx","webpack://_N_E/./src/pages/project-editor/index.tsx","webpack://_N_E/../../../src/watcher/useWatchUpdates.tsx","webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.1.4_i18next@24.1.0_typescript@5.8.2__react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../../../src/mui/dialog/ButtonConfirm.tsx"],"sourcesContent":["import to from \"await-to-js\";\r\nimport { Manifest } from \"../../android/components/Manifest\";\r\nimport { runPermissionGroup } from \"../../android/components/permissionGroupCreator\";\r\nimport { createWindowConfCopy } from \"../../android/win/WindowConf\";\r\nimport { WebViewJs } from \"../../android/WebViewJs\";\r\nimport { env } from \"../../confs/env\";\r\n\r\n\r\nfunction createCopy(callbackEventType:string, windowId:string){\r\n    let windowConf = {\r\n        htmlConf:{\r\n            url:`${env.htmlOrigin}pages/accessibility-info-buttons/#/`,\r\n            webViewJsParams:{\r\n                javaToJsDataString:JSON.stringify({event:callbackEventType})\r\n            }\r\n        },windowId\r\n    }\r\n    return createWindowConfCopy(windowConf)\r\n}\r\n\r\nfunction openWindow(callbackEventType:string, windowId:string){\r\n    let conf = createCopy(callbackEventType, windowId);\r\n    return WebViewJs.instance.createWindow(JSON.stringify(conf))\r\n}\r\nexport async function openHtmlShowA11yNodeInfoButton(callbackEventType:string, windowId:string){\r\n    let [err, group] = await to(runPermissionGroup(Manifest.Permission.SYSTEM_ALERT_WINDOW,\r\n        Manifest.Permission.BIND_ACCESSIBILITY_SERVICE))\r\n    if(err){\r\n        alert(err.toString())\r\n        WebViewJs.instance.toast(err.toString())\r\n        // showSimpleToast(err.toString())\r\n        return;\r\n    }\r\n    return openWindow(callbackEventType, windowId);\r\n}","import { NextRouter } from \"next/router\";\r\n\r\nasync function checkToPath(router:NextRouter, expectNowPath:string, pointPath:string, backCount:number){\r\n    const nowPath = router.pathname\r\n    console.log('nowpath=', nowPath);\r\n    console.log('expectNowPath=', expectNowPath)\r\n    console.log('pointPath=', pointPath)\r\n    if(nowPath === pointPath){\r\n        return\r\n    }\r\n    if(expectNowPath !== nowPath){\r\n        router.replace(pointPath)\r\n    }\r\n    while(backCount > 0){\r\n        router.back()\r\n        backCount--\r\n    }\r\n    if(router.pathname !== pointPath && pointPath){\r\n        router.push(pointPath)\r\n    }\r\n}\r\n\r\n\r\nexport const routerUtils = {\r\n    checkToPath\r\n}","import { IA11yNodeInfo } from \"@droid/project-interface\";\r\n\r\nexport const mockA11yNodeInfo1: IA11yNodeInfo = { \"activeActivity\": \"com.fanfanlo.droid.MainActivity\", \"pn\": \"com.fanfanlo.droid.debug\", \"cn\": \"android.widget.FrameLayout\", \"node\": { \"availableExtraData\": [\"android.view.accessibility.extra.DATA_TEXT_CHARACTER_LOCATION_KEY\"], \"boundsInScreen\": { \"bottom\": 733, \"left\": 57, \"right\": 264, \"top\": 631 }, \"children\": [], \"className\": \"android.widget.Button\", \"isAccessibilityDataSensitive\": false, \"isAccessibilityFocused\": false, \"isCheckable\": false, \"isChecked\": false, \"isClickable\": true, \"isContentInvalid\": false, \"isContextClickable\": false, \"isDismissable\": false, \"isEditable\": false, \"isEnabled\": true, \"isFocusable\": true, \"isFocused\": true, \"isHeading\": false, \"isImportantForAccessibility\": false, \"isLongClickable\": false, \"isMultiLine\": false, \"isPassword\": false, \"isScreenReaderFocusable\": false, \"isScrollable\": false, \"isSelected\": false, \"isShowingHintText\": false, \"isTextEntryKey\": false, \"isTextSelectable\": false, \"isVisibleToUser\": true, \"text\": \"选择节点\", \"viewIdResourceName\": \"a11y-node-select-action-item-df1c\", \"index\": 0, \"listIndex\": 24 } }\r\n\r\nexport const mockA11yNodeInfo2:IA11yNodeInfo = {\"activeActivity\":\"com.fanfanlo.droid.MainActivity\",\"pn\":\"com.fanfanlo.droid.debug\",\"cn\":\"android.widget.FrameLayout\",\"node\":{\"availableExtraData\":[\"android.view.accessibility.extra.DATA_TEXT_CHARACTER_LOCATION_KEY\"],\"boundsInScreen\":{\"bottom\":1258,\"left\":60,\"right\":467,\"top\":1186},\"children\":[],\"className\":\"android.widget.TextView\",\"isAccessibilityDataSensitive\":false,\"isAccessibilityFocused\":false,\"isCheckable\":false,\"isChecked\":false,\"isClickable\":false,\"isContentInvalid\":false,\"isContextClickable\":false,\"isDismissable\":false,\"isEditable\":false,\"isEnabled\":true,\"isFocusable\":false,\"isFocused\":false,\"isHeading\":false,\"isImportantForAccessibility\":false,\"isLongClickable\":false,\"isMultiLine\":false,\"isPassword\":false,\"isScreenReaderFocusable\":false,\"isScrollable\":false,\"isSelected\":false,\"isShowingHintText\":false,\"isTextEntryKey\":false,\"isTextSelectable\":false,\"isVisibleToUser\":true,\"text\":\"动作组\",\"index\":15,\"listIndex\":40}}\r\nexport const mockA11yNodeInfoList = [\r\n    mockA11yNodeInfo1,\r\n    mockA11yNodeInfo2\r\n]\r\n\r\nexport function getRandomMockA11yNodeInfo(){\r\n    return mockA11yNodeInfoList[parseInt((Math.random() * mockA11yNodeInfoList.length).toString())]\r\n}","import { IActionOrTriggerListPageParams, routerUtils } from \"@app/static\";\r\nimport { androidDispatchers, autoWebViewJs, isRealInAndroid, openHtmlShowA11yNodeInfoButton, windowUtils } from \"@droid/android\";\r\nimport { actionA11yNodeExecuteUtils, getTriggerOrActionListPageParams, IA11yNodeInfo, IOnChangeActionJavaDataProps, projectEventUtils, ProjectMemberType } from \"@droid/project-interface\";\r\n\r\nimport { createActionOrTriggerButtonRender, IActionOrTriggerItem } from \"@src/components/trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\n\r\nimport { NextRouter } from \"next/router\";\r\nimport { ulid } from \"ulid\";\r\nimport { getRandomMockA11yNodeInfo } from \"./mockA11yNodeInfo\";\r\nimport { getProxyDispatcher, toProxy } from \"../../../../../../../../../libs/fanfanlo\";\r\n\r\nexport const a11yNodeSelectActionItem:IActionOrTriggerItem = {\r\n    id: \"a11y-node-select-action-item-df1c\",\r\n    i18nNs: \"homepage/components/page/action-list/groups/a11y/node-select/content\",\r\n    nameKey: \"content.name\",\r\n    group: \"a11yNodeSelectActionItem.group\",\r\n    descriptionKey: \"content.description\",\r\n    type: \"action\",\r\n    LinkRender: createActionOrTriggerButtonRender(onAddSelect)\r\n}\r\nactionA11yNodeExecuteUtils.onClickChange = onChangeSelect\r\n\r\nasync function onSelect():Promise<IA11yNodeInfo>{\r\n    return new Promise((resolve)=>{\r\n\r\n        if(!isRealInAndroid){\r\n            return resolve(getRandomMockA11yNodeInfo())\r\n        }\r\n        const eventType = \"a11yNodeSelectActionItem\"\r\n        const listenIndex = autoWebViewJs.shellListen(androidDispatchers.WebViewJsDispatcher.name, eventType, eventType, false, onSelectNode)\r\n        function onSelectNode(s:string) {\r\n            const info:IA11yNodeInfo = JSON.parse(s)\r\n            console.log('fffffffffffffff', s)\r\n            windowUtils.exitWindowById(windowId)\r\n            autoWebViewJs.shellRemoveListen(androidDispatchers.WebViewJsDispatcher.name, listenIndex);\r\n            resolve(info)\r\n        }\r\n        const windowId = ulid()\r\n        openHtmlShowA11yNodeInfoButton(eventType, windowId)\r\n    })\r\n}\r\nasync function onAddSelect({query, router}:{query:IActionOrTriggerListPageParams, router:NextRouter}){\r\n    const nowPath = router.pathname\r\n    const info = await onSelect()\r\n    const action = actionA11yNodeExecuteUtils.mergeDataToDefultData({})\r\n    action.javaData.info = info\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.add,{\r\n        data:action,\r\n        projectMemberType:ProjectMemberType.actionGroup,\r\n        projectInfo:res.data\r\n    })\r\n    routerUtils.checkToPath(router, nowPath, query.backPath || \"\", 1)\r\n    autoWebViewJs.openSelfByPackage()\r\n}\r\n\r\nasync function onChangeSelect({query,onDataSelectedEventType}:IOnChangeActionJavaDataProps){\r\n    console.log('lllllllllllllllllllllllllll2223333')\r\n    const info = await onSelect()\r\n    // onJavaDataChangeDataSelect?.(info)\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    if(onDataSelectedEventType && res.data.action){\r\n        console.log('fffffffffffrom event type ')\r\n        getProxyDispatcher(res.data.action).dispatch(onDataSelectedEventType, info)\r\n        return\r\n    }\r\n    projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.updateJavaData,{\r\n        data:{info},\r\n        projectMemberType:ProjectMemberType.action,\r\n        projectInfo:res.data\r\n    })\r\n    autoWebViewJs.openSelfByPackage()\r\n}","import { IActionOrTriggerGroup } from \"../../../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { a11yNodeSelectActionItem } from \"./node-select/node-execute-select\";\r\n\r\n\r\nexport const a11yGroup:IActionOrTriggerGroup = {\r\n    i18nNs:\"homepage/components/page/action-list/groups/a11y/content\",\r\n    nameKey:\"content.name\",\r\n    descriptionKey:\"content.description\",\r\n    items:[\r\n        a11yNodeSelectActionItem\r\n    ]\r\n}","\r\nimport { actionOpenAppUtils } from \"@droid/project-interface\";\r\nimport { createActionOrTriggerListLinkRender, IActionOrTriggerItem } from \"../../../../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\n// http://192.168.177.180:3000/locales/homepage/components/page/action-list/groups/app/zh-CN/app-select.json?v=1.0.1\r\n// apps\\homepage\\public\\locales\\homepage\\components\\page\\action-list\\groups\\app\\app-select\\zh-CN\\content.json\r\n\r\n// 明天早上在这里注入actionType，继续设计，似乎openApp可以放到一个map里处理，将来更新字段多了，也可以有个分流\r\n\r\n// 在选择app的页面里应该是通过actionType找到一个函数，给这个函数注入被选择的app就行，这样的话以后安卓手机接收消息转发等也可以用选择app的页面了\r\n\r\n// 这个名字似乎叫openApp更合适\r\n// id注入设计的不合理\r\nexport const selectAppActionItem:IActionOrTriggerItem = {\r\n    id: \"selectAppActionItem-7537eb25-586d-4178-9d9b-b817706a4c6b\",\r\n    i18nNs: \"homepage/components/page/action-list/groups/app/app-select/content\",\r\n    nameKey: \"content.name\",\r\n    group: \"selectAppActionItem.group\",\r\n    descriptionKey: \"content.description\",\r\n    type: \"page\",\r\n    LinkRender: createActionOrTriggerListLinkRender(\"/app-selector\", \"selectAppActionItem-7537eb25-586d-4178-9d9b-b817706a4c6b\", {actionType:actionOpenAppUtils.type})\r\n}\r\n","import { IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport { autoWebViewJs, isRealInAndroid, openPnAnInfoWindow, PnAnResultData } from \"@droid/android\";\r\nimport { actionToAppMainPageUtils, getTriggerOrActionListPageParams, projectEventUtils, ProjectMemberType } from \"@droid/project-interface\";\r\nimport { createRandomEnglishCharacters } from \"@fanfanlo\";\r\nimport { createActionOrTriggerButtonRender, IActionOrTriggerItem } from \"@src/components/trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\n\r\n\r\nexport const toAppMainPageActionItem:IActionOrTriggerItem = {\r\n    id: \"to-app-main-page-action-item-df1c\",\r\n    i18nNs: \"homepage/components/page/action-list/groups/app/to-app-main-page/content\",\r\n    nameKey: \"content.name\",\r\n    group: \"toAppMainPageActionItem.group\",\r\n    descriptionKey: \"content.description\",\r\n    type: \"action\",\r\n    LinkRender: createActionOrTriggerButtonRender(onAddSelect)\r\n}\r\nactionToAppMainPageUtils.onClickChange = onChangeSelect\r\n\r\n\r\nasync function onSelect(){\r\n    let info:PnAnResultData ;\r\n    if(isRealInAndroid){\r\n        info = await openPnAnInfoWindow(true)\r\n    }else{\r\n        info = {\r\n            pn:`${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}.${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}.${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}`,\r\n            an:createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)\r\n        }\r\n    }\r\n    // console.log('info1=', info)\r\n    return info\r\n}\r\nasync function onAddSelect({query}:{query:IActionOrTriggerListPageParams}){\r\n    const info = await onSelect()\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    const action = actionToAppMainPageUtils.mergeDataToDefultData({javaData:{pn:info.pn, an:info.an}})\r\n    projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.add,{\r\n        data:action,\r\n        projectMemberType:ProjectMemberType.actionGroup,\r\n        projectInfo:res.data\r\n    })\r\n    window.history.back()\r\n    autoWebViewJs.openSelfByPackage()\r\n}\r\n\r\nasync function onChangeSelect({query}:{query:IActionOrTriggerListPageParams}){\r\n    const info = await onSelect()\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.updateJavaData,{\r\n        data:info,\r\n        projectMemberType:ProjectMemberType.action,\r\n        projectInfo:res.data\r\n    })\r\n    autoWebViewJs.openSelfByPackage()\r\n}","import { IActionOrTriggerGroup } from \"../../../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { selectAppActionItem } from \"./app-select/app-select\";\r\nimport { toAppMainPageActionItem } from \"./to-app-main-page/to-app-main-page\";\r\nexport const appGroup:IActionOrTriggerGroup = {\r\n    i18nNs: \"homepage/components/page/action-list/groups/app/content\",\r\n    nameKey: \"content.name\",\r\n    descriptionKey: \"content.description\",\r\n    items: [\r\n        selectAppActionItem,\r\n        toAppMainPageActionItem\r\n    ]\r\n}\r\n\r\n","import { IActionOrTriggerGroupList } from \"../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { a11yGroup } from \"./groups/a11y/a11y-group\";\r\nimport { appGroup } from \"./groups/app/app-group\";\r\n\r\nexport const actionListGroups:IActionOrTriggerGroupList = [\r\n    appGroup,\r\n    a11yGroup\r\n]\r\n\r\nexport async function initActionListGroups(){\r\n    actionListGroups\r\n}","import { ActionOrTriggerListTypeEnum, IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport { getTriggerOrActionListPageParams, ProjectMemberType, triggerTimeoutUtils } from \"@droid/project-interface\";\r\nimport { projectEventUtils } from \"@droid/project-interface\";\r\nimport { throwTraceError } from \"@fanfanlo\";\r\nimport { createActionOrTriggerButtonRender, IActionOrTriggerItem } from \"../../../../../../components/trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\n\r\nexport const timeoutTriggerItem:IActionOrTriggerItem = {\r\n    id: \"timeout-trigger-item-ce8c\",\r\n    i18nNs: \"homepage/components/page/trigger-list/groups/time/timeout/content\",\r\n    nameKey: \"content.name\",\r\n    group: \"timeoutTriggerItem.group\",\r\n    descriptionKey: \"content.description\",\r\n    type: \"trigger\",\r\n    LinkRender: createActionOrTriggerButtonRender(onSelect)\r\n}\r\n\r\nfunction onSelect({query, item}:{query:IActionOrTriggerListPageParams, item:IActionOrTriggerItem}){\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    switch(query.type){\r\n        case ActionOrTriggerListTypeEnum.addAction:\r\n            const trigger = triggerTimeoutUtils.createDefultData()\r\n            if(!res.data.triggerGroup){\r\n                return throwTraceError('triggerGroup is not found', query)\r\n            }\r\n            projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.add, {\r\n                projectMemberType: ProjectMemberType.triggerGroup,\r\n                data:trigger,\r\n                projectInfo:res.data\r\n            })\r\n            // res.data.triggerGroup.list.push(trigger)\r\n            // router.back()\r\n            window.history.back()\r\n            break;\r\n        case ActionOrTriggerListTypeEnum.updateAction:\r\n            \r\n            break;\r\n    }\r\n}","import { IActionOrTriggerGroup } from \"../../../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { timeoutTriggerItem } from \"./timeout/timeout\";\r\n\r\nexport const timeGroup:IActionOrTriggerGroup = {\r\n    i18nNs: \"homepage/components/page/trigger-list/groups/time/content\",\r\n    nameKey: \"content.name\",\r\n    descriptionKey: \"content.description\",\r\n    items: [\r\n        timeoutTriggerItem\r\n    ]\r\n}","import { IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport { autoWebViewJs, isRealInAndroid, openPnAnInfoWindow, PnAnResultData } from \"@droid/android\";\r\nimport { getTriggerOrActionListPageParams, projectEventUtils } from \"@droid/project-interface\";\r\nimport { createActionOrTriggerButtonRender, IActionOrTriggerItem } from \"@src/components/trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { triggerWhenActivityInUtils } from \"@droid/project-interface\";\r\nimport { ProjectMemberType } from \"@droid/project-interface\";\r\nimport { createRandomEnglishCharacters } from \"@fanfanlo\";\r\n\r\n\r\nexport const activityInItem:IActionOrTriggerItem = {\r\n    id: \"activity-in-item-ce8c\",\r\n    i18nNs: \"homepage/components/page/trigger-list/groups/app/activity/content\",\r\n    nameKey: \"content.name\",\r\n    group: \"activityInItem.group\",\r\n    descriptionKey: \"content.description\",\r\n    type: \"trigger\",\r\n    LinkRender: createActionOrTriggerButtonRender(onAddSelect)\r\n}\r\ntriggerWhenActivityInUtils.onClickChange = onChangeSelect\r\n// async function onSelect({query, item}:{query:IActionOrTriggerListPageParams, item:IActionOrTriggerItem}){\r\n//     const res = getTriggerOrActionListPageParams(query)\r\n//     let info:PnAnResultData ;\r\n//     if(isRealInAndroid){\r\n//         info = await openPnAnInfoWindow()\r\n//     }else{\r\n//         info = {\r\n//             pn:`${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}.${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}.${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}`,\r\n//             an:createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)\r\n//         }\r\n//     }\r\n//     console.log('info=', info)\r\n//     const trigger = triggerWhenActivityInUtils.mergeDataToDefultData({javaData:{pn:info.pn, an:info.an, cn:info.cn}})\r\n//     projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.add,{\r\n//         data:trigger,\r\n//         projectMemberType:ProjectMemberType.triggerGroup,\r\n//         projectInfo:res.data\r\n//     })\r\n//     window.history.back()\r\n// }\r\n\r\n\r\n\r\nasync function onSelect(){\r\n    let info:PnAnResultData ;\r\n    if(isRealInAndroid){\r\n        info = await openPnAnInfoWindow(true)\r\n    }else{\r\n        info = {\r\n            pn:`${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}.${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}.${createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)}`,\r\n            an:createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5),\r\n            cn:createRandomEnglishCharacters(Math.floor(Math.random() * 5) + 5)\r\n        }\r\n    }\r\n    // console.log('info1=', info)\r\n    return info\r\n}\r\nasync function onAddSelect({query}:{query:IActionOrTriggerListPageParams}){\r\n    const info = await onSelect()\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    const action = triggerWhenActivityInUtils.mergeDataToDefultData({javaData:{pn:info.pn, an:info.an, cn:info.cn}})\r\n    projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.add,{\r\n        data:action,\r\n        projectMemberType:ProjectMemberType.triggerGroup,\r\n        projectInfo:res.data\r\n    })\r\n    console.log('ccccccccccccccall open self')\r\n    autoWebViewJs.openSelfByPackage()\r\n    window.history.back()\r\n}\r\n\r\nasync function onChangeSelect({query}:{query:IActionOrTriggerListPageParams}){\r\n    const info = await onSelect()\r\n    const res = getTriggerOrActionListPageParams(query)\r\n    projectEventUtils.dispatchEditEvent(projectEventUtils.EditType.updateJavaData,{\r\n        data:info,\r\n        projectMemberType:ProjectMemberType.trigger,\r\n        projectInfo:res.data\r\n    })\r\n    autoWebViewJs.openSelfByPackage()\r\n}","import { IActionOrTriggerGroup } from \"../../../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { activityInItem } from \"./activity/activity-in\";\r\n\r\nexport const appGroup:IActionOrTriggerGroup = {\r\n    i18nNs: \"homepage/components/page/trigger-list/groups/app/content\",\r\n    nameKey: \"content.name\",\r\n    descriptionKey: \"content.description\",\r\n    items: [\r\n        activityInItem\r\n    ]\r\n}   ","import { IActionOrTriggerGroupList } from \"../../trigger-list-action-list-common/ITriggerList-IActionList-common.intf\";\r\nimport { timeGroup } from \"./groups/time/time-group\";\r\nimport { appGroup } from \"./groups/app/app-group\";\r\n\r\nexport const triggerListGroups:IActionOrTriggerGroupList = [\r\n    timeGroup,\r\n    appGroup\r\n]\r\n\r\nexport async function initTriggerListGroups(){\r\n    triggerListGroups\r\n}\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/project-editor\",\n      function () {\n        return require(\"private-next-pages/project-editor/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/project-editor\"])\n      });\n    }\n  ","import { Dispatcher, IDispatcherEventMap, createDispatchEvent } from \"@fanfanlo\";\r\n\r\nconst hasWindow = typeof window !== \"undefined\";\r\nexport let androidJsGlobalName = \"android\"\r\nexport let android = hasWindow ? (window as any)[androidJsGlobalName] : '';\r\nexport const global = (hasWindow ? window.global || (window.global=window) : {}) as any;\r\nexport const jsBridgeDispatcher = new Dispatcher()\r\n\r\nexport interface ICheckBrowserCanBackEvent{\r\n    canBack:boolean\r\n}\r\nexport interface IJsBridgeEventMap extends IDispatcherEventMap{\r\n    // 安卓询问js是否可以响应后退键\r\n    checkBrowserCanBack: (event:ICheckBrowserCanBackEvent)=>void\r\n}\r\nexport function getWebViewJsId(){\r\n    return android ? android.webViewJsId() : \"-1\";\r\n}\r\nconst listeningMap:Record<string, any> = {}\r\n// initJsBridge();\r\nlet initJsBridgeCalled = false\r\n// 供安卓调用js，必须初始化。\r\nexport function initJsBridge(){\r\n    if(!android)return;\r\n    if(initJsBridgeCalled)return;\r\n    initJsBridgeCalled = true\r\n    global.onCallJsEvent = function (event:any){\r\n        console.log(\"js bridge global event\", JSON.stringify(event));\r\n        if(!event)return;\r\n        try {\r\n            for (const [index, value] of Object.entries(listeningMap)) {\r\n                if(value.callbackEventType !== event.type)continue;\r\n                value.fun(event.data);\r\n                if(value.once){\r\n                    delete listeningMap[index];\r\n                    // webViewJsListen时传入了once，所以java端自己就卸载侦听了\r\n                    // webViewJsRemoveListen(value.target, index)\r\n                }\r\n            }\r\n            const e = createDispatchEvent(event.data, undefined, undefined, event.type)\r\n            jsBridgeDispatcher.dispatch(event.type, e)\r\n            // 返回时不需要json序列化，容器会对其进行自动序列化\r\n            if(e.result !== undefined)return e.result \r\n            // 如果没有事件的返回值，则返回一个统一的__okkey__\r\n            return \"__okkey__\"\r\n        }catch (e){\r\n            console.log('global on call js event error', e);\r\n        }\r\n        return ;\r\n    }\r\n}\r\nexport function webViewJsListen(target:any, type:any, callbackEventType:any, once:any, fun:any){\r\n    if(!android)return -1;\r\n    const index = android?.listen(target, type, callbackEventType, once)\r\n    if(!index)return -1;\r\n    let key = index.toString();\r\n    try{\r\n        key = `${typeof target === 'string' ? target : 'target'}-${typeof type === 'string' ? type : 'type'}-${typeof callbackEventType === 'string' ? callbackEventType : 'callbackEventType'}-${typeof index === 'string' ? index : index.toString()}`\r\n    }catch(e){\r\n        console.log('listen_fn 2 error', e)\r\n    }\r\n    listeningMap[key] = {once, fun, target, type, callbackEventType}\r\n    return key;\r\n}\r\n\r\nexport function webViewJsRemoveListen(target:any, index:any){\r\n    if(!android)return;\r\n    return android.removeListen(target, index)\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from \"@mui/material\"\r\nimport { PropsWithChildren, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\ninterface IEditableTextProps {\r\n    setText: (text: string) => void\r\n    title?: string\r\n    cancelText?: string\r\n    saveText?: string\r\n    contentText?: string\r\n    helperText?: string\r\n    minHeight?: string\r\n}\r\nimport React from 'react'\r\nexport function EditableText({ setText, title, cancelText, saveText, contentText, helperText, minHeight, children }: IEditableTextProps & PropsWithChildren) {\r\n    const { t } = useTranslation('fanfanlo/mui/dialog/content')\r\n    const [editText, setEditText] = useState('')\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    function handleEdit(s: string) {\r\n        setEditText(s)\r\n    }\r\n    return (\r\n        <>\r\n            <span style={{cursor: 'pointer', width: '100%', textAlign: 'center', display:\"inline-block\", backgroundColor: '', minHeight:minHeight || '1rem'}} onClick={() => setIsEditing(true)}><span >{children || ''}</span></span>\r\n            {isEditing && (\r\n                <Dialog open={isEditing} onClose={() => setIsEditing(false)}>\r\n                    <DialogTitle>{title ||t('EditableText.title')}</DialogTitle>\r\n                    {contentText && <DialogContent>{contentText}</DialogContent>}\r\n                    <DialogContent>\r\n                        <TextField\r\n                        id=\"editable-text\"\r\n                        aria-label=\"editable-text\"\r\n                            autoFocus\r\n                            required\r\n                            fullWidth\r\n                            helperText={helperText}\r\n                            variant=\"standard\"\r\n                            value={editText} onChange={(e) => handleEdit(e.target.value)} />\r\n\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button\r\n                        id=\"editable-text-cancel\"\r\n                        data-id=\"editable-text-cancel\"\r\n                        onClick={() => setIsEditing(false)}>{cancelText || t('EditableText.cancel')}</Button>\r\n                        <Button\r\n                        id=\"editable-text-save\"\r\n                        data-id=\"editable-text-save\"\r\n                        onClick={() => { setIsEditing(false); setText(editText) }}>{saveText || t('EditableText.save')}</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\n","import { IProjectData } from \"@droid/project-interface\";\r\nimport { getProxyTarget, proxyUtils } from \"@fanfanlo\";\r\nimport _ from \"lodash\";\r\nimport { IProjectHistory } from \"./IProjectHistory.intf\";\r\n\r\nexport const projectsHistoryMap = new Map<string, IProjectHistory[]>()\r\n\r\nexport function addProjectHistory(history:IProjectHistory){\r\n    proxyUtils.runPauseProxyFn(()=>{\r\n        history.project = _.cloneDeep(getProxyTarget(history.project))\r\n    })\r\n    const p = history //_.cloneDeep(getProxyTarget(history))\r\n    const list = projectsHistoryMap.get(history.project.id)\r\n    if(!list){\r\n        projectsHistoryMap.set(history.project.id, [p])\r\n        return\r\n    }\r\n    list.push(p)\r\n}\r\n\r\nexport function getProjectHistory(projectId:string){\r\n    return projectsHistoryMap.get(projectId) || []\r\n}\r\n\r\nexport function removeProjectHistory(projectId:string){\r\n    projectsHistoryMap.delete(projectId)\r\n}\r\n\r\nexport function getProjectLastHistory(projectId:string){\r\n    const list = getProjectHistory(projectId)\r\n    return list[list.length - 1]\r\n}\r\n\r\nexport function takeProjectSnapshoot(project:IProjectData):boolean{\r\n    const last = getProjectLastHistory(project.id)\r\n    if(last && _.isEqual(last.project, project)){\r\n        return false\r\n    }\r\n    addProjectHistory({\r\n        index: last ? last.index + 1 : 0,\r\n        project,\r\n        date: new Date().toISOString()\r\n    })   \r\n    return true\r\n}\r\n\r\nexport function projectHistoryIsChanged(project:IProjectData):boolean{\r\n    const last = getProjectLastHistory(project.id)\r\n    return !last || !_.isEqual(last.project, project)\r\n\r\n}\r\n\r\nexport function isSameProjectHistoryId(id:number, projectId:string):boolean{\r\n    const last = getProjectLastHistory(projectId)\r\n    return last?.index === id\r\n}","import { IProjectData, projectStore } from '@droid/project-interface';\r\nimport { Dispatcher, loadI18nValue, Log, toProxy } from '@fanfanlo';\r\nimport { IProjectEditInfo } from './IProjectEditInfo.intf';\r\n// import { projectStore } from '../../storage';    \r\nimport toast from 'react-hot-toast';\r\nconst map: { [key: string]: IProjectEditInfo } = toProxy({});\r\nconst dispatcher = new Dispatcher();\r\nconst projectSavedEvent = 'project-saved';\r\nexport const editProjectInfoUtils = {\r\n  edit: (project: IProjectData) => {\r\n    // const info = map[project.id] || (map[project.id] = createProjectEditInfo(project));\r\n    const info = (map[project.id] = createProjectEditInfo(project));\r\n    return info;\r\n  },\r\n  getEditInfoById: (id: string) => {\r\n    if (map[id]) return map[id];\r\n    const project = projectStore.findProject(id);\r\n    if (project) return (map[id] = createProjectEditInfo(project));\r\n    return null;\r\n  },\r\n  listenProjectSaved: (fn: (project: IProjectData) => void) => {\r\n    return dispatcher.addListener(projectSavedEvent, fn);\r\n  },\r\n};\r\n\r\nexport function createProjectEditInfo(project: IProjectData): IProjectEditInfo {\r\n  const info = toProxy({\r\n    project,\r\n    askStay: false,\r\n    giveup: false,\r\n    updated: false,\r\n    historyId: 0,\r\n    testTime: new Date().toLocaleString(),\r\n    save: async () => {\r\n      info.updated = false;\r\n      info.askStay = false;\r\n      info.giveup = false;\r\n      projectStore.saveProject(project);\r\n      dispatcher.dispatch(projectSavedEvent, project);\r\n      const s = await loadI18nValue('droid-project/project/manager/content', 'edit-project-info-utils.projectSaved');\r\n      toast.success(s);\r\n    },\r\n  });\r\n  return info;\r\n}\r\n","import { createContext } from \"react\";\r\nimport { IProjectEditInfo } from \"../../..\";\r\nimport { IActionData, IActionGroup, IActionJavaData, IActionShellData, ITriggerAction, ITriggerActionGroup, ITriggerData, ITriggerGroup, ITriggerJavaData, ITriggerShellData } from \"@droid/project-interface\";\r\n\r\nexport const ProjectEditInfoContext = createContext<IProjectEditInfo>({} as IProjectEditInfo)\r\n\r\n// export const TriggerActionGroupContext = createContext<ITriggerActionGroup>({} as ITriggerActionGroup)\r\n\r\n// export const TriggerActionContext = createContext<ITriggerAction>({} as ITriggerAction)\r\n\r\n// export const TriggerGroupContext = createContext<ITriggerGroup>({} as ITriggerGroup)\r\n\r\n// export const TriggerListContext = createContext<ITriggerData<ITriggerShellData, ITriggerJavaData>[]>([] as ITriggerData<ITriggerShellData, ITriggerJavaData>[])\r\n\r\n// export const TriggerContext = createContext<ITriggerData<ITriggerShellData, ITriggerJavaData>>({} as ITriggerData<ITriggerShellData, ITriggerJavaData>)\r\n\r\n// export const ActionGroupContext = createContext<IActionGroup>({} as IActionGroup)\r\n\r\n// export const ActionListContext = createContext<IActionData<IActionShellData, IActionJavaData>[]>([] as IActionData<IActionShellData, IActionJavaData>[])\r\n\r\n// export const ActionContext = createContext<IActionData<IActionShellData, IActionJavaData>>({} as IActionData<IActionShellData, IActionJavaData>)","import { useEffect, useState } from \"react\"\r\nimport { getProxyDispatcher } from \".\"\r\nimport { listenAnyWildcard } from \"../dispatcher/throttle\"\r\n\r\nexport function useWatchListOperation<T>(target:T[]):[T[], ()=>void]{\r\n    const [list, setList] = useState<T[]>([...target])\r\n    const unsub = getProxyDispatcher(target).addListener(listenAnyWildcard, ()=>{\r\n        setList([...target])\r\n    })\r\n    useEffect(()=>{\r\n        return ()=>{\r\n            unsub()\r\n        }\r\n    }, [])\r\n    return [list, unsub]\r\n}\r\n","import { listenAnyWildcard } from \"../dispatcher\"\r\nimport { getProxyDispatcher, toProxy } from \"./proxyWatch\"\r\nlet count = 0\r\nexport interface IUpdateVersion{\r\n    version:number\r\n    count:number\r\n    key:string\r\n}\r\nconst map = new WeakMap<object, IUpdateVersion>()\r\nexport function getUpdateVersion<T extends object>(data:T):IUpdateVersion{\r\n    let version = map.get(data) || toProxy({\r\n        version:++count,\r\n        count:0,\r\n        key:`${count}-0`\r\n    })\r\n    if(!map.has(data)){\r\n        map.set(data, version)\r\n        const dispatcher = getProxyDispatcher(data)\r\n        dispatcher.addListener(listenAnyWildcard, (now, old)=>{\r\n            version.count++\r\n            version.version = ++count\r\n            version.key = `${version.version}-${version.count}`\r\n        })\r\n    }\r\n    return version\r\n}\r\n\r\nexport function getUpdateVersionKey<T extends object>(data:T):string{\r\n    return getUpdateVersion(data).key\r\n}\r\n","import { actionGroupType, childToProjectDataUtils, getActionGroupElement, GroupCheckList1, GroupCheckList1Context, GroupCheckList2, IActionGroup, IChildToProjectData, IGroup, ITriggerActionGroup, ITriggerGroup, triggerActionGroupType, triggerGroupType } from '@droid/project-interface';\r\nimport {\r\n  ButtonConfirm,\r\n  getParent,\r\n  getUpdateVersionKey,\r\n  Log,\r\n  objectCountUtils,\r\n  useProxyWatch,\r\n  useWatchUpdates\r\n} from '@fanfanlo';\r\nimport { Box, Button, Checkbox, FormControlLabel, FormGroup, Grid2, IconButton } from '@mui/material';\r\nimport { useContext, useEffect } from 'react';\r\n\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\r\n\r\nfunction getProjectDataByGroup(group:IGroup<any>){\r\n    let projectData:IChildToProjectData = {}\r\n    switch(group.type){\r\n        case actionGroupType:\r\n            getActionGroupElement(group as IActionGroup,'', '', projectData)\r\n            break;\r\n        case triggerGroupType:\r\n          childToProjectDataUtils.triggerGroup.getTriggerGroupElement(group as ITriggerGroup,'', '', projectData)\r\n            break;\r\n        case triggerActionGroupType:\r\n          childToProjectDataUtils.triggerActionGroup.getTriggerActionGroupElement(group as ITriggerActionGroup,'', '', projectData)\r\n            break;\r\n    }\r\n    return projectData\r\n}\r\nfunction Check2({ list, index }: { list: GroupCheckList2; index: number }) {\r\n  const logger = new Log(false, 'Check2_fn');\r\n  logger.isPaused = true\r\n  logger.log('list=', list)\r\n  const [l] = useWatchUpdates(list);\r\n  const groupCheckList1Context = useContext(GroupCheckList1Context);\r\n  function onRemoveClick() {\r\n    groupCheckList1Context.splice(index, 1);\r\n  }\r\n  logger.log('l=', l)\r\n  // const check1 = getParent<GroupCheckList1>(list)\r\n  // console.log('check1=', check1)\r\n  // const group = getParent<IGroup<any>>(check1!)!\r\n  // console.log('group=', group)\r\n  // const projectData = getProjectDataByGroup(group)\r\n  // console.log('projectData=', projectData)\r\n  // const globalId = `project`\r\n  return (\r\n    <>\r\n      <Grid2 container>\r\n        <Grid2 container size={'grow'}>\r\n          {l.map((check, index) => (\r\n            <Grid2 key={objectCountUtils.getNewCountId().toString()}>\r\n              <FormGroup>\r\n                <FormControlLabel\r\n                  label={index.toString()}\r\n                  control={\r\n                    <Checkbox\r\n                    data-id=\"group-check-checkbox\"\r\n                      data-checked={check}\r\n                      data-value={check}\r\n                      checked={check}\r\n                      onChange={e => {\r\n                        list[index] = e.target.checked;\r\n                      }}\r\n                    />\r\n                  }\r\n                />\r\n              </FormGroup>\r\n            </Grid2>\r\n          ))}\r\n        </Grid2>\r\n        <Grid2>\r\n          <ButtonConfirm title=\"提醒\" onConfirm={onRemoveClick} content=\"您要删除此条校验吗？\">\r\n            <IconButton data-id=\"group-check-remove\" >\r\n              <DeleteOutlineIcon />\r\n            </IconButton>\r\n          </ButtonConfirm>\r\n        </Grid2>\r\n      </Grid2>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Check1({ list }: { list: GroupCheckList1 }) {\r\n  const logger = new Log(false, 'Check1_fn');\r\n  logger.isPaused = true\r\n  logger.log('Check1 list=', list);\r\n\r\n  return (\r\n    <GroupCheckList1Context.Provider value={list}>\r\n      {list.map((checks2, index) => (\r\n        <Check2 key={getUpdateVersionKey(checks2)} list={list[index]} index={index} />\r\n      ))}\r\n    </GroupCheckList1Context.Provider>\r\n  );\r\n}\r\nexport function GroupCheck({ group }: { group: IGroup<any> }) {\r\n  const logger = new Log(false, 'GroupCheck_fn');\r\n  logger.isPaused = true;\r\n  const [isSequential] = useProxyWatch(group, 'isSequential', group.isSequential);\r\n  const [l] = useProxyWatch(group, 'list', group.list);\r\n  const [list] = useWatchUpdates(l);\r\n  const [listSize] = useProxyWatch(list, 'length', list.length);\r\n  const [c] = useProxyWatch(group, 'checks', group.checks);\r\n  const [checks1] = useWatchUpdates(c);\r\n  function updateChecks2(){\r\n    logger.log('updateChecks2_fn', 'listSize=', listSize, group.checks);\r\n    group.checks.forEach(checks2 => {\r\n      logger.log('updateChecks2_fn', 'checks2=', checks2);\r\n      for (let i = checks2.length; i < listSize; i++) {\r\n        checks2.push(true);\r\n      }\r\n      checks2.length = listSize;\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    updateChecks2();\r\n  }, [listSize]);\r\n  // logger.log('group=', group);\r\n  // logger.log('checks1=', checks1);\r\n  // logger.log('isSequential=', isSequential);\r\n  logger.log('list.length=', list.length);\r\n  if (list.length <= 1 || isSequential) return <></>;\r\n  return (\r\n    <Box>\r\n      <Grid2 container>\r\n        <Grid2>\r\n          <Button\r\n            data-id=\"group-add-check-list.875aec4f-5049-426a-a395-0ac0c6666a35\"\r\n            onClick={() => {\r\n              group.checks.push(new Array(listSize).fill(true));\r\n            }}>\r\n            添加校验组\r\n          </Button>\r\n        </Grid2>\r\n      </Grid2>\r\n      <Check1 list={group.checks} />\r\n    </Box>\r\n  );\r\n}\r\n","import { IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport { Button } from \"@mui/material\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PropsWithChildren } from \"react\";\r\nexport interface IActionListOrTriggerListPageLinkProps extends PropsWithChildren{\r\n  query:IActionOrTriggerListPageParams\r\n  attrs:object\r\n  path:'/action-list'|'/trigger-list'\r\n  btnId:string\r\n}\r\nexport function ActionListOrTriggerListPageLink({query, attrs, path, btnId, children}:IActionListOrTriggerListPageLinkProps){\r\n  const router = useRouter();\r\n  query.backPath = router.pathname\r\n  function handleClick(){\r\n    const list = Object.keys(query).map(key=> [key, query[key]!!.toString()])\r\n    const q = new URLSearchParams(list);\r\n    const href = `${path}?${q.toString()}`\r\n    router.push(href)\r\n  }\r\n  \r\n  return (\r\n    <Button onClick={handleClick} \r\n    {...attrs}\r\n    // id=\"link-router-to-action-list\"\r\n    // data-id=\"link-router-to-action-list\"\r\n    id={btnId}\r\n    data-id={btnId}\r\n    >{children}</Button>\r\n  )\r\n}","import { ActionListContext, IActionData } from \"@droid/project-interface\"\r\nimport { ActionUtilsMap } from \"@droid/project-interface\"\r\nimport { Box, Button } from \"node_modules/@mui/material\"\r\nimport {ButtonConfirm, getParent, toProxy} from \"@fanfanlo\"\r\nimport { useContext } from \"react\"\r\nexport function Action({actionData}:{actionData:IActionData<any,any>}){\r\n    const list = useContext(ActionListContext)\r\n    const utils = ActionUtilsMap[actionData.type]\r\n    function onDeleteComfirmed(){\r\n        const index = list.indexOf(actionData)\r\n        if(index === -1)return\r\n        list.splice(index, 1)\r\n    }\r\n    return <Box sx={{\r\n        position: 'relative',\r\n        padding: '2px',\r\n        marginTop:\"2px\",\r\n        marginBottom:\"2px\",\r\n        '&::after': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            right: 0,\r\n            top: '5px',\r\n            bottom: '5px',\r\n            borderRight: '1px solid red',\r\n        },\r\n        '&::before': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            left: 0,\r\n            top: '5px',\r\n            bottom: '5px',\r\n            borderLeft: '1px solid red',\r\n        }\r\n    }}>\r\n        {utils.UI(actionData)}\r\n        <Box sx={{textAlign:\"center\"}}>\r\n            \r\n        <ButtonConfirm title=\"删除动作\" content=\"确定删除本动作吗？\" onConfirm={onDeleteComfirmed}>\r\n                <Button \r\n                id=\"del-action-btn\"\r\n                data-id=\"del-action-btn\"\r\n                >删除</Button>\r\n            </ButtonConfirm>\r\n        </Box>\r\n    </Box>\r\n}\r\n","import { getUpdateVersionKey, useWatchUpdates } from \"@fanfanlo\"\r\nimport { useContext } from \"react\"\r\n// import { ActionGroupContext } from \"../../../../contexts\"\r\nimport { Action } from \"./action/Action\"\r\nimport { ActionGroupContext } from \"@droid/project-interface\"\r\nimport _ from \"lodash\"\r\nexport function ActionList(){\r\n    const actionGroup = useContext(ActionGroupContext)\r\n    const [list] = useWatchUpdates(actionGroup.list)\r\n    if(!list || !_.isArray(list)){\r\n        console.log('lllllllllllllist is null', actionGroup)\r\n    }\r\n    return <div>\r\n        {actionGroup.list.map(action=>{\r\n            return <Action key={getUpdateVersionKey(action)} actionData={action} />\r\n        })}\r\n    </div>\r\n}\r\n","import { ActionOrTriggerListTypeEnum, IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport { ActionGroupContext, ActionListContext, getActionGroupElement, IActionGroup, TriggerActionContext, TriggerActionGroupContext } from \"@droid/project-interface\";\r\nimport { toProxy, useProxyWatch } from \"@fanfanlo\";\r\nimport { Box, FormControlLabel, FormGroup, Grid2, Switch } from \"@mui/material\";\r\nimport { useContext } from \"react\";\r\nimport { GroupCheck } from \"../../../components/group/GroupCheck\";\r\nimport { ActionListOrTriggerListPageLink } from \"../../../components/list-page-link/ActionListOrTriggerListPageLink\";\r\nimport { ProjectEditInfoContext } from \"../../../contexts\";\r\nimport { ActionList } from \"./action-list/ActionList\";\r\nimport { useTranslation } from \"@fanfanlo\";\r\nexport function ActionGroup({ actionGroup }: { actionGroup: IActionGroup }) {\r\n    const {t} = useTranslation(\"droid-project/project/ui/project/edit-project/trigger-action-group/trigger-action/action-group/content\")\r\n    const editInfo = useContext(ProjectEditInfoContext)\r\n    const triggerActionGroup = useContext(TriggerActionGroupContext)\r\n    const triggerAction = useContext(TriggerActionContext)\r\n\r\n    const query: IActionOrTriggerListPageParams = {\r\n        projectId: editInfo.project.id,\r\n        triggerActionGroupId: triggerActionGroup.id,\r\n        triggerActionId: triggerAction.id,\r\n        actionGroupId: actionGroup.id,\r\n        type: ActionOrTriggerListTypeEnum.addAction,\r\n        actionType: '',\r\n    }\r\n    const [isSequential] = useProxyWatch(actionGroup, 'isSequential', actionGroup.isSequential)\r\n    const [listSize] = useProxyWatch(actionGroup.list, 'length', actionGroup.list.length)\r\n    function setIsSequential(value: boolean) {\r\n        toProxy(actionGroup).isSequential = value\r\n    }\r\n    return (\r\n        <ActionGroupContext.Provider value={actionGroup}>\r\n            <ActionListContext.Provider value={actionGroup.list}>\r\n\r\n                <Box sx={{ border: '2px solid #ccc', padding: '4px' }}>\r\n                    <Grid2 container sx={{ alignItems: 'center' }}>\r\n                        <Grid2 size={\"grow\"}>\r\n                            <Box>{t(\"content.title\")}</Box>\r\n                        </Grid2>\r\n                        <Grid2>\r\n                            {listSize > 1 && <FormGroup>\r\n                                <FormControlLabel control={<Switch checked={isSequential} \r\n                                data-id=\"action-group-checkbox-is-sequential.122f\"\r\n                                aria-checked={isSequential}\r\n                                data-checked={isSequential}\r\n                                onChange={(e) => { setIsSequential(e.target.checked) }} />} label={t(\"content.sequential\")} />\r\n                            </FormGroup>}\r\n                        </Grid2>\r\n                        <Grid2>\r\n                            <Box>\r\n                                <ActionListOrTriggerListPageLink query={query} attrs={getActionGroupElement(actionGroup)} path=\"/action-list\" btnId=\"link-router-to-action-list\" children={t(\"content.list\")} />\r\n                            </Box>\r\n                        </Grid2>\r\n                    </Grid2>\r\n                    <GroupCheck group={actionGroup} />\r\n                    <ActionList />\r\n                </Box>\r\n            </ActionListContext.Provider>\r\n        </ActionGroupContext.Provider>\r\n    )\r\n}\r\n\r\n","import { ITriggerJavaData, ITriggerShellData, TriggerContext } from \"@droid/project-interface\";\r\nimport { ITriggerData } from \"@droid/project-interface\";\r\nimport { Box, Button } from \"@mui/material\";\r\nimport { getTriggerUtils } from \"@droid/project-interface\";\r\nimport { getParent, toProxy, ButtonConfirm } from \"@fanfanlo\";\r\nimport { useContext } from \"react\";\r\nimport { TriggerListContext } from \"@droid/project-interface\";\r\nexport function Trigger({triggerData}:{triggerData:ITriggerData<ITriggerShellData, ITriggerJavaData>}){\r\n    const list = useContext(TriggerListContext)\r\n    const utils = getTriggerUtils(triggerData.type)\r\n    const onDeleteComfirmed = () => {\r\n        const index = list.indexOf(toProxy(triggerData))\r\n        if(index === -1) return\r\n        toProxy(list).splice(index, 1)\r\n    }\r\n    return (\r\n        <TriggerContext.Provider value={triggerData}>\r\n            <Box>\r\n                {utils.UI(triggerData)}\r\n                <Box sx={{textAlign:\"center\"}}>\r\n                    <ButtonConfirm title=\"删除触发\" content=\"确定删除本触发吗？\" onConfirm={onDeleteComfirmed}>\r\n                        <Button \r\n                        id=\"del-trigger-btn\"\r\n                        data-id=\"del-trigger-btn\"\r\n                        >删除</Button>\r\n                    </ButtonConfirm>\r\n                </Box>\r\n            </Box>\r\n        </TriggerContext.Provider>\r\n    )\r\n}\r\n\r\n    \r\n","import { ITriggerData, ITriggerJavaData, ITriggerShellData, TriggerListContext, TriggerGroupContext } from \"@droid/project-interface\"\r\nimport { Box } from \"@mui/material\"\r\nimport { getUpdateVersion, useWatchUpdates } from \"@fanfanlo\"\r\nimport { Trigger } from \"./trigger/Trigger\"\r\nimport { useContext, useEffect } from \"react\"\r\nexport function TriggerList(){\r\n    const triggerGroup = useContext(TriggerGroupContext)\r\n    const [l] = useWatchUpdates<ITriggerData<ITriggerShellData, ITriggerJavaData>[]>(triggerGroup.list)\r\n    // useEffect(()=>{\r\n    //     console.log('llllllllllllllllllllllll', l)\r\n    //     console.log('triggerGroupppppppppp', triggerGroup)\r\n    // }, [l])\r\n    return (\r\n        <TriggerListContext.Provider value={triggerGroup.list}>\r\n            <Box>\r\n                {triggerGroup.list.map((trigger) => (\r\n                    <Trigger key={getUpdateVersion(trigger).version} triggerData={trigger} />\r\n                ))}\r\n            </Box>\r\n        </TriggerListContext.Provider>\r\n    )\r\n}\r\n\r\n","import { ActionOrTriggerListTypeEnum, IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport { ITriggerGroup, TriggerActionContext, TriggerActionGroupContext, TriggerGroupContext, childToProjectDataUtils } from \"@droid/project-interface\";\r\nimport { useTranslation } from \"@fanfanlo\";\r\nimport { Box, FormControlLabel, FormGroup, Grid2, Switch } from \"@mui/material\";\r\nimport { useContext } from \"react\";\r\nimport { ActionListOrTriggerListPageLink } from \"../../../components/list-page-link/ActionListOrTriggerListPageLink\";\r\nimport { ProjectEditInfoContext } from \"../../../contexts\";\r\nimport { TriggerList } from \"./trigger-list/TriggerList\";\r\nimport { toProxy, useProxyWatch } from \"@fanfanlo\";\r\nimport { GroupCheck } from \"../../../components/group/GroupCheck\";\r\nexport function TriggerGroup({ triggerGroup }: { triggerGroup: ITriggerGroup }) {\r\n    const {t} = useTranslation(\"droid-project/project/ui/project/edit-project/trigger-action-group/trigger-action/trigger-group/content\")\r\n    \r\n    const editInfo = useContext(ProjectEditInfoContext)\r\n    const triggerActionGroup = useContext(TriggerActionGroupContext)\r\n    const triggerAction = useContext(TriggerActionContext)\r\n    \r\n    const query: IActionOrTriggerListPageParams = {\r\n        projectId: editInfo.project.id,\r\n        triggerActionGroupId: triggerActionGroup.id,\r\n        triggerActionId: triggerAction.id,\r\n        triggerGroupId: triggerGroup.id,\r\n        type: ActionOrTriggerListTypeEnum.addAction,\r\n        actionType: '',\r\n    }\r\n\r\n    const [isSequential] = useProxyWatch(triggerGroup, 'isSequential', triggerGroup.isSequential)\r\n    const [listSize] = useProxyWatch(triggerGroup.list, 'length', triggerGroup.list.length)\r\n    function setIsSequential(value: boolean) {\r\n        toProxy(triggerGroup).isSequential = value\r\n    }\r\n    return (\r\n        <TriggerGroupContext.Provider value={triggerGroup}>\r\n            <Box sx={{ border: '2px solid #a4a737', padding: '4px', marginBottom: \"2px\", marginTop: \"2px\" }}>\r\n                <Grid2 container sx={{ alignItems: 'center' }}>\r\n                    <Grid2 size={\"grow\"}>\r\n                        <Box>{t(\"content.title\")}</Box>\r\n                    </Grid2>\r\n                        <Grid2>\r\n                            {listSize > 1 && <FormGroup>\r\n                                <FormControlLabel control={<Switch checked={isSequential} \r\n                                data-id=\"trigger-group-checkbox-is-sequential.122f\"\r\n                                aria-checked={isSequential}\r\n                                data-checked={isSequential}\r\n                                onChange={(e) => { setIsSequential(e.target.checked) }} />} label={t(\"content.sequential\")} />\r\n                            </FormGroup>}\r\n                        </Grid2>\r\n                    <Grid2>\r\n                        <Box>\r\n                            <ActionListOrTriggerListPageLink query={query} attrs={childToProjectDataUtils.triggerGroup.getTriggerGroupElement(triggerGroup)} path=\"/trigger-list\" btnId=\"link-router-to-trigger-list\" children={t(\"content.list\")} />\r\n\r\n                        </Box>\r\n                    </Grid2>\r\n                </Grid2>\r\n                <GroupCheck group={triggerGroup} />\r\n                <TriggerList/>\r\n            </Box>\r\n        </TriggerGroupContext.Provider>\r\n    )\r\n}\r\n\r\n\r\n","import { ITriggerAction, TriggerActionContext } from \"@droid/project-interface\";\r\nimport { EditableText, getParentWatchProxy } from \"@fanfanlo\";\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\r\nimport HandymanIcon from '@mui/icons-material/Handyman';\r\nimport NotificationsNoneIcon from '@mui/icons-material/NotificationsNone';\r\nimport { Box, Grid2, IconButton } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { ActionGroup } from \"./action-group/ActionGroup\";\r\nimport { TriggerGroup } from \"./trigger-group/TriggerGroup\";\r\n\r\nimport { ButtonConfirm } from \"@fanfanlo\";\r\nexport function TriggerAction({ triggerAction }: { triggerAction: ITriggerAction }) {\r\n    const [name, setName] = useState(triggerAction.name || '未命名')\r\n    function handleNameChange(name: string) {\r\n        triggerAction.name = name\r\n        setName(name)\r\n    }\r\n    function handleDelete() {\r\n        const parent = getParentWatchProxy<ITriggerAction[]>(triggerAction)\r\n        if(!parent) return\r\n        parent.splice(parent.indexOf(triggerAction), 1)\r\n    }\r\n    return (\r\n        <TriggerActionContext.Provider value={triggerAction}>\r\n            <Box sx={{ border: '2px solid #02450e', padding: '4px' }}\r\n            data-id-trigger-action={triggerAction.id}\r\n            >\r\n                <Grid2 sx={{ alignItems: 'center' }} container>\r\n                    <Grid2>\r\n                        <NotificationsNoneIcon />\r\n                        <HandymanIcon />\r\n                    </Grid2>\r\n                    <Grid2 size={\"grow\"}>\r\n                        <EditableText setText={handleNameChange} >\r\n                            <span\r\n                            data-id=\"rename-trigger-action-btn.a4c6\"\r\n                            >{name}</span>\r\n                        </EditableText>\r\n                    </Grid2>\r\n                    <Grid2>\r\n                        <ButtonConfirm title=\"提示\" content=\"确认要删除这条触发器和动作吗\" onConfirm={handleDelete}>\r\n                            <IconButton\r\n                            data-id=\"del-trigger-action-btn\"\r\n                            >\r\n                                <DeleteOutlineIcon />\r\n                            </IconButton>\r\n                        </ButtonConfirm>\r\n                    </Grid2>\r\n                </Grid2>\r\n                <TriggerGroup triggerGroup={triggerAction.triggerGroup} />\r\n                <ActionGroup actionGroup={triggerAction.actionGroup} />\r\n            </Box>\r\n        </TriggerActionContext.Provider>\r\n    )\r\n}\r\n\r\n","import { childToProjectDataUtils, createDefultTriggerAction, TriggerActionGroupContext } from \"@droid/project-interface\"\r\nimport { EditableText, getUpdateVersion, toParent, useWatchListOperation, } from \"@fanfanlo\"\r\nimport AddIcon from '@mui/icons-material/Add'\r\nimport HandymanIcon from '@mui/icons-material/Handyman'\r\nimport NotificationsNoneIcon from '@mui/icons-material/NotificationsNone'\r\nimport TableRowsIcon from '@mui/icons-material/TableRows'\r\nimport { Box, Grid2, IconButton } from \"@mui/material\"\r\nimport { useContext, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { ProjectEditInfoContext } from \"../contexts\"\r\nimport { TriggerAction } from \"./trigger-action/TriggerAction\"\r\nexport function TriggerActionGroup() {\r\n    const { t } = useTranslation('droid-project/project/ui/project/edit-project/trigger-action-group/content')\r\n    const editInfo = useContext(ProjectEditInfoContext)\r\n    const [groupName, setGroupName] = useState(editInfo.project.triggerActionGroup.name || t('TriggerActionGroup.unamed'))\r\n\r\n    const [list] = useWatchListOperation(editInfo.project.triggerActionGroup.list)\r\n    function handleGroupNameChange(name: string) {\r\n        editInfo.project.triggerActionGroup.name = name\r\n        setGroupName(name || t('TriggerActionGroup.unamed'))\r\n    }\r\n    const triggerActionGroup = editInfo.project.triggerActionGroup\r\n    function addTriggerAction() {\r\n        const newTriggerAction = createDefultTriggerAction()\r\n        toParent(triggerActionGroup).list.push(newTriggerAction)\r\n    }\r\n    return (\r\n        <TriggerActionGroupContext.Provider value={triggerActionGroup}>\r\n            <Box sx={{ border: '2px solid rgb(217, 217, 217)', padding: '4px' }}\r\n            {...childToProjectDataUtils.triggerActionGroup.getTriggerActionGroupElementByProp(triggerActionGroup.list)}\r\n            data-id-trigger-action-group={triggerActionGroup.id}>\r\n                <Grid2 container sx={{ alignItems: 'center' }}>\r\n                    <Grid2 container sx={{ alignItems: 'center' }}>\r\n                        <NotificationsNoneIcon />\r\n                        <HandymanIcon />\r\n                        <TableRowsIcon />\r\n                    </Grid2>\r\n                    <Grid2 size={\"grow\"} sx={{ alignItems: 'center', width: \"100%\" }}>\r\n\r\n                        <Box sx={{ width: \"100%\" }}>\r\n                            <EditableText setText={handleGroupNameChange} >\r\n                                <span\r\n                                data-id=\"rename-groupname-btn-a322\" style={{ backgroundColor: 'red' }}>{groupName}</span>\r\n                            </EditableText>\r\n                        </Box>\r\n                    </Grid2>\r\n                    <Grid2>\r\n                        <Box>\r\n                            <IconButton\r\n                            data-id=\"add-trigger-action-btn.22fab779-75e2-4e34-82f4-64667e7fc017\"\r\n                             onClick={addTriggerAction}>\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Box>\r\n                    </Grid2>\r\n                </Grid2>\r\n                <Box>\r\n                    {list.map((ta, index) => {\r\n                        const triggerAction = triggerActionGroup.list[index]\r\n                        return <TriggerAction key={getUpdateVersion(triggerAction).version}\r\n                        triggerAction={triggerAction} />\r\n                    })}\r\n                </Box>\r\n            </Box>\r\n        </TriggerActionGroupContext.Provider>\r\n    )\r\n}\r\n\r\n\r\n","import { IJsBridgeEventMap, jsBridgeDispatcher } from \"@droid/android\"\r\nimport { mergeProjectDataToDefultData, ProjectContext, projectStore } from \"@droid/project-interface\"\r\nimport { Dispatcher, EditableText, getParentProxyTarget, IDispatchEvent, Log, objectCountUtils, toParent, toProxy, useProxyWatch, watchUpdates } from \"@fanfanlo\"\r\nimport CloseIcon from '@mui/icons-material/Close'\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, Paper, styled } from \"@mui/material\"\r\nimport { useRouter } from \"next/router\"\r\n\r\nimport { useContext, useEffect } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { takeProjectSnapshoot } from \"../../../../history/projectsHistoryMap\"\r\nimport { editProjectInfoUtils } from \"../../../manager/edit-project-info-utils\"\r\nimport { ProjectEditInfoContext } from \"./contexts\"\r\nimport { TriggerActionGroup } from \"./trigger-action-group/TriggerActionGroup\"\r\n\r\nimport SaveIcon from '@mui/icons-material/Save'\r\nimport _ from \"lodash\"\r\n// import { IAppBarBackAskEvent } from \"@app/static\"\r\n\r\ninterface IAppBarBackAskEvent{\r\n    defaultPrevented:boolean\r\n}\r\nconst BootstrapDialog = styled(Dialog)(({ theme }) => ({\r\n    '& .MuiDialogContent-root': {\r\n        padding: theme.spacing(2),\r\n    },\r\n    '& .MuiDialogActions-root': {\r\n        padding: theme.spacing(1),\r\n    },\r\n}));\r\n\r\nfunction ProjectContent() {\r\n    const project = useContext(ProjectContext)\r\n    return <Box\r\n    data-id-project={project.id}>\r\n        <Paper>\r\n            <TriggerActionGroup />\r\n        </Paper>\r\n    </Box>\r\n}\r\n\r\nfunction StayAlert() {\r\n    const editInfo = useContext(ProjectEditInfoContext)\r\n    const logger = Log.createCountedLogger(false, 'project-editor-effect')\r\n    const [askStay] = useProxyWatch(editInfo, 'askStay', editInfo.askStay)\r\n    const router = useRouter()\r\n\r\n    function toLeave() {\r\n        editInfo.askStay = false\r\n        editInfo.giveup = true\r\n        router.back()\r\n        editInfo.giveup = false\r\n        editInfo.updated = false\r\n    }\r\n    function handleClose() {    \r\n        editInfo.askStay = false\r\n    }\r\n    function handleLeaveWithoutSave() {\r\n        toLeave()\r\n        projectStore.deleteDraft(editInfo.project.id)\r\n    }\r\n    function handleSaveAndLeave() {\r\n        editInfo.save()\r\n        toLeave()\r\n        projectStore.deleteDraft(editInfo.project.id)\r\n    }\r\n    function handleStayAndEdit() {\r\n        editInfo.askStay = false\r\n        editInfo.giveup = false\r\n        logger.log('handleStayAndEdit fn called ', 'objectCount=', objectCountUtils.getObjectCount(editInfo), 'editInfo=', editInfo)\r\n    }\r\n\r\n    function handleSaveToDraftAndLeave() {\r\n        // projectStore.save\r\n        projectStore.addDraft(editInfo.project)\r\n        toLeave()\r\n    }\r\n\r\n    return <Box>\r\n        <BootstrapDialog\r\n            onClose={handleClose}\r\n            aria-labelledby=\"customized-dialog-title\"\r\n            open={askStay}\r\n        >\r\n            <DialogTitle sx={{ m: 0, p: 2 }} id=\"customized-dialog-title\">\r\n                提示:您有更改没有保存，确定要离开吗？\r\n            </DialogTitle>\r\n            <IconButton\r\n                aria-label=\"close\"\r\n                onClick={handleClose}\r\n                sx={(theme) => ({\r\n                    position: 'absolute',\r\n                    right: 8,\r\n                    top: 8,\r\n                    color: theme.palette.grey[500],\r\n                })}\r\n            >\r\n                <CloseIcon />\r\n            </IconButton>\r\n            <DialogContent dividers>\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleLeaveWithoutSave}>放弃保存并离开</Button>\r\n                <Button onClick={handleSaveToDraftAndLeave}>保存变更到草稿并离开</Button>\r\n                <Button onClick={handleSaveAndLeave}>保存并离开</Button>\r\n                <Button onClick={handleStayAndEdit}>留下编辑</Button>\r\n            </DialogActions>\r\n        </BootstrapDialog>\r\n    </Box>\r\n}\r\nfunction ProjectTools(){\r\n    const {t} = useTranslation('droid-project/project/ui/project/edit-project/content')\r\n    function onRunClick(){\r\n\r\n    }\r\n    return(\r\n        <>\r\n            <Box>\r\n                <Button onClick={onRunClick}>{t(\"content.projectTools.run\")}</Button>\r\n            </Box>\r\n        </>\r\n    )\r\n}\r\nexport function EditProjectBuilder() {\r\n    const dispatcher = new Dispatcher()\r\n    const router = useRouter()\r\n    const { id } = router.query\r\n    let project = projectStore.findDraftOrSavedProject((id || '-1') as string) || mergeProjectDataToDefultData({ id: (id || '-1') as string })\r\n    const createProject = project\r\n    const draftPorjct = project = projectStore.addDraft(createProject)\r\n    const proxyProject = project = toProxy(draftPorjct)\r\n    const parentProject = project = toParent(proxyProject)\r\n    const editInfo = editProjectInfoUtils.edit(parentProject)\r\n    type NeedStay = boolean\r\n    function checkUpdated():NeedStay{\r\n        const logger = new Log(false, 'checkUpdated_fn')\r\n        logger.isPaused = true\r\n        const c = projectStore.findSavedProject(project.id)\r\n        logger.log('checkUpdated fn called',  'c=', c)\r\n        editInfo.updated = !c || !_.isEqual(c, project)\r\n        logger.log('editInfo.updated=', editInfo.updated)\r\n        if(editInfo.updated && !editInfo.giveup){\r\n            editInfo.askStay = true\r\n            logger.log('checkUpdated fn called',  'editInfo.askStay=', editInfo.askStay)\r\n            return true\r\n        }\r\n        logger.log('checkUpdated fn called2',  'editInfo.askStay=', editInfo.askStay)\r\n        return false\r\n    }\r\n    function Content() {\r\n        useEffect(() => {\r\n            takeProjectSnapshoot(project)\r\n            if (!project) return\r\n            const unsub = watchUpdates(getParentProxyTarget(project), () => {\r\n                takeProjectSnapshoot(project)\r\n                editInfo.updated = true\r\n                // console.log('project updated2', project)\r\n            })\r\n            return () => {\r\n                unsub()\r\n            }\r\n        }, [])\r\n        useEffect(() => {\r\n            const unsub = jsBridgeDispatcher.addListener<IJsBridgeEventMap>(\"checkBrowserCanBack\", (event: IDispatchEvent) => {\r\n                const canBack = event.result = checkUpdated()\r\n                console.log('ooooooooooooooooooooooooo checkBrowserCanBack_fn', event, 'canback=', canBack)\r\n                if(canBack)projectStore.deleteDraft(project.id)\r\n            })\r\n            return () => {\r\n                unsub()\r\n            }\r\n        }, [])\r\n\r\n        useEffect(()=>{\r\n            return dispatcher.addListener('back', (e:IAppBarBackAskEvent)=>{\r\n                const canBack = e.defaultPrevented = checkUpdated()\r\n                if(canBack)projectStore.deleteDraft(project.id)\r\n            })\r\n        },[])\r\n        const p = toProxy(editInfo.project)\r\n        return (\r\n            <ProjectEditInfoContext.Provider value={editInfo}>\r\n                <ProjectContext.Provider value={p}>\r\n                    <Box sx={{width:\"100%\"}}>\r\n                        <ProjectTools />\r\n                        <ProjectContent />\r\n                        <StayAlert />\r\n                    </Box>\r\n                </ProjectContext.Provider>\r\n            </ProjectEditInfoContext.Provider>\r\n        )\r\n    }\r\n\r\n    function Title() {\r\n        const { t } = useTranslation('droid-project/project/ui/project/edit-project/content')\r\n        const clickToSetProjectName = t('content.clickToSetProjectName')\r\n        const [name] = useProxyWatch(project, 'name', clickToSetProjectName)\r\n        function setName(name: string) {\r\n            project.name = name\r\n        }\r\n        return (<div style={{ display: 'flex', flexDirection: 'row', gap: 16, width: \"100%\", alignItems: \"center\" }}>\r\n            <span style={{ flexGrow: 1, paddingLeft: \"2rem\" }}>\r\n                <EditableText setText={setName} >\r\n                    <h2><span\r\n                    id=\"project-name-editor\"\r\n                    data-id=\"project-name-editor\" \r\n                    >\r\n                        {name || clickToSetProjectName}\r\n                    </span></h2>\r\n                </EditableText>\r\n            </span>\r\n            <IconButton onClick={() => { editInfo.save(); }}>\r\n                <SaveIcon />\r\n            </IconButton>\r\n        </div>\r\n        )\r\n    }\r\n    return { Content, Title, dispatcher }\r\n}","import { EditProjectBuilder } from \"@droid/project\"\r\nimport { AppbarContainer, AppShell, IAppbarProps } from \"@app/ui\"\r\nimport { initActionListGroups } from \"@src/components/page/action-list/action.data\"\r\nimport { initTriggerListGroups } from \"@src/components/page/trigger-list/trigger.data\"\r\n\r\n\r\n\r\nexport default function ProjectEditor(){\r\n    const {Content, Title, dispatcher} = EditProjectBuilder()\r\n    initActionListGroups()\r\n    initTriggerListGroups(  )\r\n    const appBarProps:IAppbarProps = {\r\n        title:<Title/>,\r\n        back:true,\r\n        backDispatcher:dispatcher\r\n    }\r\n    return (\r\n        <AppShell>\r\n            <AppbarContainer appbarProps={appBarProps}\r\n            titleConf={{ns:\"homepage/pages/project-editor/content\", key:\"editor.title\"}}>\r\n                <Content />\r\n            </AppbarContainer>\r\n        </AppShell>\r\n    )\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import _ from \"lodash\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { IWatchUpdatesConfig, watchUpdates } from \"./watchUpdates\"\r\nimport { PropertiesChain, toProxy } from \"./proxyWatch\"\r\nimport { useProxyWatch } from \"./useProxyWatch\"\r\nimport { objectCountUtils } from \"../utils\"\r\nimport { useWatch } from \"./UseWatch\"\r\nimport { Log } from \"../log\"\r\n\r\n/**\r\n * \r\n * 注意，返回的无论是object还是array，都无法监听，因为它们不是proxy，而是原始对象的副本\r\n * @param target 要监听的对象\r\n * @param conf 监听配置\r\n * @returns 监听的对象\r\n */\r\nexport function useWatchUpdates<T extends object>(target: T, conf?: IWatchUpdatesConfig<T>): [T] {\r\n    const [value, setValue] = useState<T>(target)\r\n    useEffect(() => {\r\n        console.log('use watch updates look look id', objectCountUtils.getObjectCount(target))\r\n        watchUpdates(target, (info) => {\r\n            console.log('uuuuuuuuuupdated', info)\r\n            console.log('tttttttarget=', target);\r\n            const now = _.isArray(info.target) ? [...info.target] : info.target\r\n            // setValue(now as T)\r\n            setValue((_.isArray(target) ? [...target] : { ...target }) as T)\r\n        }, conf)\r\n    }, [])\r\n    return [value as T]\r\n}\r\n\r\n/**\r\n * useProxyWatch + useWatchUpdates 结合体\r\n * 因为react的刷新机制，所以第二个state必须得用setState才会生效。\r\n * 不然其实这是两行代码，第一行是useProxyWatch，第二行是useWatchUpdates就可以了。\r\n * @param target 要监听的对象\r\n * @param propertyChain 要监听的属性链\r\n * @param defaultValue 默认值\r\n * @param conf 监听配置\r\n * @returns 监听的对象 返回的第一个参数是重新拼装的{...arr} or {...obj}，第二个参数是原始的target or defaultValue\r\n */\r\nexport function useProxyWatchUpdates<T extends object, U extends object>(target: T,\r\n    propertyChain: PropertiesChain<T>,\r\n    defaultValue: U,\r\n    conf?: IWatchUpdatesConfig<U>): [U, U] {\r\n        const logger = new Log(false, 'useProxyWatchUpdates_fn');\r\n        logger.pause = true;\r\n    const [v] = useProxyWatch(target, propertyChain, defaultValue)\r\n    const [value, setValue] = useState<U>(v);\r\n    logger.log(`propertyChain=`, propertyChain);\r\n    logger.log(`value=`, value);\r\n    logger.log('v=', v);\r\n    logger.log('defaultValue=', defaultValue)\r\n    useEffect(() => {\r\n        logger.log(`useEffect_fn v=`, v)\r\n        const newValue = _.isArray(v)\r\n            ? [...v]\r\n            : Object.assign({}, v);\r\n\r\n        setValue(newValue as U);\r\n        return watchUpdates(v, (info) => {\r\n            logger.log('watchUpdates_fn', 'info=', info)\r\n            // setValue((_.isArray(v) ? [...v ] : {...v}) as U)\r\n            // 使用 Object.assign 来避免循环引用\r\n            const newValue = _.isArray(v)\r\n                ? [...v]\r\n                : Object.assign({}, v);\r\n\r\n            setValue(newValue as U);\r\n        }, conf)\r\n    }, [v])\r\n    return [value, v]\r\n}\r\n\r\n","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.1.4_i18next@24.1.0_typescript@5.8.2__react-dom@19.0.0_react@19.0.0__react@19.0.0\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\"\r\nimport React, { PropsWithChildren, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nexport interface ButtonConfirmProps {\r\n    title?: string | React.ReactNode\r\n    content?: string | React.ReactNode\r\n    confirmText?: string | React.ReactNode\r\n    cancelText?: string | React.ReactNode\r\n    onConfirm?: () => void\r\n    onCancel?: () => void\r\n    onClose?: (confirmed:boolean) => void\r\n    cancelId?: string\r\n    confirmId?: string\r\n}\r\n\r\nexport function ButtonConfirm({ title, content, confirmText, cancelText, onConfirm, onCancel, onClose , cancelId, confirmId, children }: ButtonConfirmProps & PropsWithChildren) {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const {t} = useTranslation('fanfanlo/mui/dialog/content')\r\n    return (\r\n        <>\r\n            <span onClick={() => setIsOpen(true)}>\r\n                {children}  \r\n            </span>\r\n            <Dialog open={isOpen} onClose={() => setIsOpen(false)}>\r\n                <DialogTitle>{title || t('ButtonConfirm.title')}</DialogTitle>\r\n                <DialogContent>{content || t('ButtonConfirm.content')}</DialogContent>\r\n                <DialogActions>\r\n                    <Button id={cancelId || 'btn-dialog-button-confirm-cancel'}\r\n                    data-id={cancelId || 'btn-dialog-button-confirm-cancel'}\r\n                    onClick={()=>{setIsOpen(false); onCancel?.();onClose?.(false)}}>{cancelText || t('ButtonConfirm.cancel')}</Button>\r\n                    <Button id={confirmId || 'btn-dialog-button-confirm-confirm'}\r\n                    data-id={confirmId || 'btn-dialog-button-confirm-confirm'}\r\n                    onClick={()=>{setIsOpen(false); onConfirm?.();onClose?.(true)}}>{confirmText || t('ButtonConfirm.confirm')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n"],"names":["mockA11yNodeInfo1","mockA11yNodeInfo2","mockA11yNodeInfoList","getRandomMockA11yNodeInfo","parseInt","Math","random","length","toString","routerUtils","androidDispatchers","autoWebViewJs","isRealInAndroid","openHtmlShowA11yNodeInfoButton","windowUtils","actionA11yNodeExecuteUtils","getTriggerOrActionListPageParams","projectEventUtils","ProjectMemberType","createActionOrTriggerButtonRender","ulid","getProxyDispatcher","a11yNodeSelectActionItem","id","i18nNs","nameKey","group","descriptionKey","type","LinkRender","onAddSelect","onClickChange","onChangeSelect","onSelect","Promise","resolve","eventType","listenIndex","shellListen","WebViewJsDispatcher","name","onSelectNode","s","info","JSON","parse","console","log","exitWindowById","windowId","shellRemoveListen","query","router","nowPath","pathname","action","mergeDataToDefultData","javaData","res","dispatchEditEvent","EditType","add","data","projectMemberType","actionGroup","projectInfo","checkToPath","backPath","openSelfByPackage","onDataSelectedEventType","dispatch","updateJavaData","a11yGroup","items","actionOpenAppUtils","createActionOrTriggerListLinkRender","selectAppActionItem","actionType","openPnAnInfoWindow","actionToAppMainPageUtils","createRandomEnglishCharacters","toAppMainPageActionItem","pn","floor","an","window","history","back","appGroup","actionListGroups","initActionListGroups","ActionOrTriggerListTypeEnum","triggerTimeoutUtils","throwTraceError","timeoutTriggerItem","item","addAction","trigger","createDefultData","triggerGroup","updateAction","timeGroup","triggerWhenActivityInUtils","activityInItem","cn","triggerListGroups","initTriggerListGroups","getProxyTarget","proxyUtils","_","projectsHistoryMap","Map","addProjectHistory","runPauseProxyFn","project","cloneDeep","p","list","get","set","push","getProjectHistory","projectId","removeProjectHistory","delete","getProjectLastHistory","takeProjectSnapshoot","last","isEqual","index","date","Date","toISOString","projectHistoryIsChanged","isSameProjectHistoryId","projectStore","Dispatcher","loadI18nValue","toProxy","toast","map","dispatcher","projectSavedEvent","editProjectInfoUtils","edit","createProjectEditInfo","getEditInfoById","findProject","listenProjectSaved","fn","addListener","askStay","giveup","updated","historyId","testTime","toLocaleString","save","saveProject","success","createContext","ProjectEditInfoContext","actionGroupType","childToProjectDataUtils","getActionGroupElement","GroupCheckList1Context","triggerActionGroupType","triggerGroupType","ButtonConfirm","getUpdateVersionKey","Log","objectCountUtils","useProxyWatch","useWatchUpdates","Box","Button","Checkbox","FormControlLabel","FormGroup","Grid2","IconButton","useContext","useEffect","DeleteOutlineIcon","getProjectDataByGroup","projectData","getTriggerGroupElement","triggerActionGroup","getTriggerActionGroupElement","Check2","logger","isPaused","l","groupCheckList1Context","onRemoveClick","splice","container","size","check","label","control","data-id","data-checked","data-value","checked","onChange","e","target","getNewCountId","title","onConfirm","content","Check1","Provider","value","checks2","GroupCheck","isSequential","listSize","c","checks","checks1","updateChecks2","forEach","i","onClick","Array","fill","useRouter","ActionListOrTriggerListPageLink","attrs","path","btnId","children","handleClick","Object","keys","key","q","URLSearchParams","href","ActionListContext","ActionUtilsMap","Action","actionData","utils","onDeleteComfirmed","indexOf","sx","position","padding","marginTop","marginBottom","right","top","bottom","borderRight","left","borderLeft","UI","textAlign","ActionGroupContext","ActionList","isArray","div","TriggerActionContext","TriggerActionGroupContext","Switch","useTranslation","ActionGroup","t","editInfo","triggerAction","triggerActionGroupId","triggerActionId","actionGroupId","setIsSequential","border","alignItems","aria-checked","TriggerContext","getTriggerUtils","TriggerListContext","Trigger","triggerData","TriggerGroupContext","getUpdateVersion","TriggerList","version","TriggerGroup","triggerGroupId","EditableText","getParentWatchProxy","HandymanIcon","NotificationsNoneIcon","useState","TriggerAction","setName","handleNameChange","handleDelete","parent","data-id-trigger-action","setText","span","createDefultTriggerAction","toParent","useWatchListOperation","AddIcon","TableRowsIcon","TriggerActionGroup","groupName","setGroupName","handleGroupNameChange","addTriggerAction","newTriggerAction","getTriggerActionGroupElementByProp","data-id-trigger-action-group","width","style","backgroundColor","ta","jsBridgeDispatcher","mergeProjectDataToDefultData","ProjectContext","getParentProxyTarget","watchUpdates","CloseIcon","Dialog","DialogActions","DialogContent","DialogTitle","Paper","styled","SaveIcon","BootstrapDialog","theme","spacing","ProjectContent","data-id-project","StayAlert","createCountedLogger","toLeave","handleClose","handleLeaveWithoutSave","deleteDraft","handleSaveAndLeave","handleStayAndEdit","getObjectCount","handleSaveToDraftAndLeave","addDraft","onClose","aria-labelledby","open","m","aria-label","color","palette","grey","dividers","ProjectTools","onRunClick","EditProjectBuilder","findDraftOrSavedProject","createProject","draftPorjct","proxyProject","parentProject","checkUpdated","findSavedProject","Content","unsub","event","canBack","result","defaultPrevented","Title","clickToSetProjectName","display","flexDirection","gap","flexGrow","paddingLeft","h2","AppbarContainer","AppShell","ProjectEditor","appBarProps","backDispatcher","appbarProps","titleConf","ns","newValue"],"sourceRoot":"","ignoreList":[35]}