{"version":3,"file":"static/chunks/pages/home/test-script-6a961f9ff66a7fa4.js","mappings":";;;;;;;;;;;;;;AACuC;AACvC,gEAAgE;AACtC;AAE1B,SAASE,aAAaC,CAAS;IAC3B,IAAIC,MAAoB,EAAE;IAC1B,IAAIC,MAAM;IACV,IAAIC,IAAIH,EAAEI,QAAQ,CAACF;IACnB,KAAK,IAAIG,KAAKF,EAAG;QACbF,IAAIK,IAAI,CAACD,CAAC,CAAC,EAAE;IACjB;IACA,OAAOJ;AACX;AACA,IAAIM,4BAA6B;AAqC1B,SAASC;IAEZ,eAAeC;IACX,gCAAgC;IAChC,0BAA0B;IAC9B;IACA,qBACI;kBACI,qEAACZ,2FAAMA;YAACY,SAASA;sBAAS;;;AAGtC;AACA,iEAAeD,UAAUA,EAAA;AACzB,eAAeE;IAEX,MAAMT,MAAM,MAAMH,MAAMa,GAAG,CAAC;IAC5B,MAAMC,eAAeX,IAAIY,IAAI;IAC7B,IAAIC,eAA6Bf,aAAaa,cAAcG,MAAM,CAAChB,aAAaQ;AAEhF,6BAA6B;AAC7B,+DAA+D;AAC/D,iDAAiD;AACjD,+BAA+B;AAC/B,8CAA8C;AAC9C,8CAA8C;AAC9C,iCAAiC;AACjC,8CAA8C;AAC9C,4BAA4B;AAChC;;;;;;;;;AC9EA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,KAAyC;AAChE;AACA;AACA,OAAO,KAAU,EAAE,EAId;AACL","sources":["webpack://_N_E/./src/pages/home/test-script.tsx","webpack://_N_E/?4438"],"sourcesContent":["import { AutoWebViewJs } from \"@droid/android\";\r\nimport { Button } from \"@mui/material\";\r\n// import { buildScript, printScript1 } from \"@scripts/script1\";\r\nimport axios from \"axios\";\r\ntype LibPathKey = string\r\nfunction parseUsedLib(s: string) {\r\n    let res: LibPathKey[] = [];\r\n    let reg = /javaLib\\[\\\"(.*)\\\"\\]/g\r\n    let r = s.matchAll(reg);\r\n    for (let a of r) {\r\n        res.push(a[1] as LibPathKey)\r\n    }\r\n    return res;\r\n}\r\nlet beforeJavaLibCreateScript = `\r\nlet isScriptRunnable = true;\r\nlet scriptExitListeners = [];\r\nfunction addScriptExitListener(f){\r\n    removeScriptExitListener(f);\r\n    scriptExitListeners.push(f);\r\n}\r\nfunction removeScriptExitListener(f){\r\n    let index = scriptExitListeners.indexOf(f);\r\n    if(index == -1)return;\r\n    scriptExitListeners.splice(index, 1);\r\n}\r\nfunction onJavaCallTerminate(){\r\n    callScriptExit();\r\n    return true;\r\n}\r\nfunction callJavaExit(){\r\n\r\n}\r\nfunction jsCallComplete(){\r\n    callScriptExit();\r\n    callJavaExit();\r\n}\r\n\r\nfunction jsCallFailed(){\r\n    callScriptExit();\r\n    callJavaExit();\r\n}\r\nfunction callScriptExit(){\r\n    isScriptRunnable = false;\r\n    let res = \"\"\r\n    console.log('before call exit', scriptExitListeners.length);\r\n    scriptExitListeners.forEach((f)=>{f()});\r\n    console.log('after call exit');\r\n    return res;\r\n}\r\n    `\r\nexport function TestScript() {\r\n\r\n    async function onClick() {\r\n        // printScript1('hello script1')\r\n        // runProjectScriptDemo();\r\n    }\r\n    return (\r\n        <>\r\n            <Button onClick={onClick}>script</Button>\r\n        </>\r\n    )\r\n}\r\nexport default TestScript\r\nasync function runProjectScriptDemo() {\r\n    \r\n    const res = await axios.get('/scripts/projectScript07.js')\r\n    const scriptString = res.data\r\n    let dependencies: LibPathKey[] = parseUsedLib(scriptString).concat(parseUsedLib(beforeJavaLibCreateScript));\r\n\r\n    // const conf = buildScript({\r\n    //     script: scriptString, injects: [\"console\", \"a11yModel\"],\r\n    //     optimizationLevel: -1, printScript: false,\r\n    //     scriptId: \"demo.project\"\r\n    // }, dependencies, beforeJavaLibCreateScript)\r\n    // const s = AutoWebViewJs.confToScript(conf);\r\n    // console.log('ssssssssssss', s)\r\n    // AutoWebViewJs.instance.callScriptRunner(s);\r\n    // console.log('code', code)\r\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/home/test-script\",\n      function () {\n        return require(\"private-next-pages/home/test-script.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/home/test-script\"])\n      });\n    }\n  "],"names":["Button","axios","parseUsedLib","s","res","reg","r","matchAll","a","push","beforeJavaLibCreateScript","TestScript","onClick","runProjectScriptDemo","get","scriptString","data","dependencies","concat"],"sourceRoot":"","ignoreList":[]}